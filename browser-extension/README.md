# AI笔记收藏助手 - 浏览器插件

一键收藏网页到AI笔记系统的浏览器扩展插件。

## 功能特性

- ✅ 一键收藏当前网页
- ✅ 自动提取网页标题和链接
- ✅ 支持选择目标文件夹
- ✅ 自动创建笔记文档

## 目录结构

```
browser-extension/
├── manifest.json              # 插件配置文件
├── popup/
│   ├── popup.html            # 弹窗界面
│   ├── popup.js              # 弹窗逻辑
│   └── popup.css             # 弹窗样式
├── background/
│   └── service-worker.js     # 后台服务
├── utils/
│   └── api-client.js         # API客户端
└── icons/                    # 插件图标
    └── README.txt
```

## 安装方法

### Chrome/Edge 浏览器

1. 打开浏览器，进入扩展程序管理页面
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`

2. 开启右上角的"开发者模式"

3. 点击"加载已解压的扩展程序"

4. 选择 `browser-extension` 文件夹

5. 安装完成！插件图标会出现在浏览器工具栏

## 使用方法

### 首次使用 - 登录

1. 点击浏览器工具栏的插件图标
2. 弹出登录界面
3. 获取Token的步骤：
   - 在浏览器中访问 AI笔记网站并登录
   - 按 F12 打开开发者工具
   - 切换到 Console 标签
   - 输入命令：`localStorage.getItem('auth_token')`
   - 复制显示的token值（不含引号）
4. 将token粘贴到插件的输入框
5. 点击"登录"按钮

### 收藏网页

1. 在任意网页上点击插件图标
2. 插件会自动显示当前页面的标题和来源
3. 在文件夹列表中选择目标文件夹（点击即可选中，背景会变为蓝色）
4. 点击"收藏"按钮
5. 等待2-3秒，显示"收藏成功"后自动关闭
6. 打开AI笔记网站，在对应文件夹中即可看到新创建的文档

### 文档格式

收藏后创建的文档格式如下：

```markdown
# [网页标题]

**原文链接**: [网页URL](网页URL)

**收藏时间**: 2026-01-02 13:55:15

---

```

## API接口

插件使用以下API接口：

- `GET /api/knowledge-base` - 获取知识库结构
- `POST /api/documents` - 创建文档

## 权限说明

插件需要以下权限：

- `activeTab` - 访问当前标签页信息（获取标题和URL）
- `storage` - 本地存储（保存Token）
- `scripting` - 注入脚本
- `https://api.knowbit.cn/*` - 访问API接口

## 常见问题

### 1. 登录失败

- 确认Token是否正确复制（不要包含引号）
- 确认Token是否过期（重新登录网站获取新Token）
- 检查网络连接

### 2. 文件夹列表加载失败

- 检查是否已登录
- 确认API服务是否正常
- 查看浏览器控制台错误信息

### 3. 收藏失败

- 确认是否选择了文件夹
- 检查网络连接
- 查看错误提示信息

### 4. 找不到收藏的文档

- 刷新AI笔记网站页面
- 检查是否在正确的文件夹中
- 确认收藏操作是否显示成功

## 开发计划

- [ ] 支持网页内容自动解析
- [ ] 支持Markdown格式转换
- [ ] 支持图片上传
- [ ] 支持快捷键操作
- [ ] 支持批量收藏
- [ ] 支持离线缓存
- [ ] 支持标签自动提取

## 技术栈

- Manifest V3
- Vanilla JavaScript
- Chrome Extension APIs

## 注意事项

1. Token需要保密，不要分享给他人
2. 插件仅在本地浏览器存储Token
3. 建议定期更换Token以保证安全
4. 如果Token泄露，请立即在网站上退出登录

## 联系方式

如有问题或建议，请联系开发团队。
